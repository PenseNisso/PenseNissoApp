{% extends "global/base.html" %}
{% load crispy_forms_tags %}

{% block title %}
- Alterar Senha
{% endblock %}

{% block content %}
<!-- Change Password Form -->
<div class="w-full flex items-center flex-col">
    <div class="bg-blue-600 text-white w-full text-center my-6 py-1">
        <h1 class="text-2xl font-bold">Perfil de Usuário</h1>
    </div>
    <form method="post">
        {% csrf_token %}
        <fieldset class="form-group">
            <legend class="text-xl mb-6 border-b-2 border-black w-full text-center">
                Edite os campos abaixo para alterar sua senha
            </legend>
            {{ form|crispy }}
        </fieldset>
        <div class="flex flex-nowrap justify-center space-x-10 mt-2 w-full">
            <button type="button" onclick="window.location.href='{% url 'user:profile' request.user.id %}'"
                class="bg-blue-700 bg-opacity-30 w-1/3 py-1.5 px-3 font-semibold rounded-md cursor-pointer hover:scale-[1.035]">
                Voltar
            </button>
            <button type="button" onclick="openModal()"
                class="bg-blue-700 bg-opacity-30 w-2/3 py-1.5 px-3 font-semibold rounded-md cursor-pointer hover:scale-[1.035]">
                Alterar Senha
            </button>
        </div>

        <!-- Confirmation Popup -->
        <div class="fixed z-10 inset-0 overflow-y-auto hidden" id="confirm-modal">
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                    <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
                </div>
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
                <div class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
                    role="dialog" aria-modal="true" aria-labelledby="modal-headline">
                    <div>
                        <div class="mt-3 text-center sm:mt-5">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-headline">
                                Tem certeza que deseja alterar sua senha?
                            </h3>
                        </div>
                    </div>
                    <div class="mt-5 sm:mt-6 flex flex-row space-x-10">
                        <button
                            class="inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-500 text-base font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm"
                            type="button" onclick="closeModal()">
                            Cancelar
                        </button>
                        <button
                            class="inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-semibold text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm"
                            type="submit">
                            Confirmar Alteração
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<script>
    function openModal() {
        document.getElementById('confirm-modal').classList.remove('hidden');
    }
    function closeModal() {
        document.getElementById('confirm-modal').classList.add('hidden');
    }
</script>
{% endblock %}